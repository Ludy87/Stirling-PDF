<!DOCTYPE html>
<html th:lang="${#locale.language}"
  th:dir="#{language.direction}"
  th:data-language="${#locale.toString()}"
  xmlns:th="https://www.thymeleaf.org">

  <head>
    <th:block th:insert="~{fragments/common :: head(title=#{translatePdf.title}, header=#{translatePdf.header})}"></th:block>
  </head>

  <body>
    <th:block th:insert="~{fragments/common :: game}"></th:block>
    <div id="page-container">
      <div id="content-wrap">
        <th:block th:insert="~{fragments/navbar.html :: navbar}"></th:block>
        <br><br>
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8 bg-card">
              <div class="tool-header">
                <span class="material-symbols-rounded tool-header-icon other">translate</span>
                <span class="tool-header-text"
                  th:text="#{translatePdf.header}"></span>
              </div>
              <p class="text-muted"
                th:text="#{translatePdf.description}"></p>

              <div class="alert alert-info"
                role="alert">
                <p th:text="#{translatePdf.config.summary(${llmConfig.model}, ${llmConfig.provider})}"></p>
                <p th:if="${llmConfig.baseUrl != null and !#strings.isEmpty(llmConfig.baseUrl)}"
                  th:text="#{translatePdf.config.baseUrl(${llmConfig.baseUrl})}"></p>
                <p th:text="#{translatePdf.helper.chunking(${llmConfig.maxChunkCharacters})}"></p>
              </div>

              <form action="#"
                th:action="@{'/api/v1/llm/translate-pdf'}"
                method="post"
                enctype="multipart/form-data">
                <fieldset>
                  <div
                    th:replace="~{fragments/common :: fileSelector(name='fileInput', multipleInputsForSingleRequest=false, accept='application/pdf')}">
                  </div>

                  <div class="card mb-3">
                    <div class="card-body">
                      <div class="mb-3">
                        <label class="form-label"
                          for="targetLanguage"
                          th:text="#{translatePdf.targetLanguage.label}"></label>
                        <input id="targetLanguage"
                          name="targetLanguage"
                          type="text"
                          class="form-control"
                          required
                          th:placeholder="#{translatePdf.targetLanguage.placeholder}">
                      </div>
                      <div class="mb-3">
                        <label class="form-label"
                          for="sourceLanguage"
                          th:text="#{translatePdf.sourceLanguage.label}"></label>
                        <input id="sourceLanguage"
                          name="sourceLanguage"
                          type="text"
                          class="form-control"
                          th:placeholder="#{translatePdf.sourceLanguage.placeholder}">
                      </div>
                      <div class="row g-3">
                        <div class="col-md-6"
                          th:if="${llmConfig == null or llmConfig.allowModelOverride}">
                          <label class="form-label"
                            for="model"
                            th:text="#{translatePdf.model.label}"></label>
                          <input id="model"
                            name="model"
                            type="text"
                            class="form-control"
                            th:placeholder="#{translatePdf.model.placeholder}">
                        </div>
                        <div class="col-md-6"
                          th:if="${llmConfig == null or llmConfig.allowProviderOverride}">
                          <label class="form-label"
                            for="provider"
                            th:text="#{translatePdf.provider.label}"></label>
                          <input id="provider"
                            name="provider"
                            type="text"
                            class="form-control"
                            th:placeholder="#{translatePdf.provider.placeholder}">
                        </div>
                      </div>
                      <div class="row g-3 mt-0">
                        <div class="col-md-6">
                          <label class="form-label"
                            for="fontSize"
                            th:text="#{translatePdf.fontSize.label}"></label>
                          <input id="fontSize"
                            name="fontSize"
                            type="number"
                            min="6"
                            max="36"
                            step="0.5"
                            class="form-control"
                            value="12">
                        </div>
                        <div class="col-md-6"
                          th:if="${llmConfig == null or llmConfig.allowOriginalText}">
                          <div class="form-check mt-4">
                            <input type="checkbox"
                              value="true"
                              id="includeOriginalText"
                              name="includeOriginalText">
                            <label for="includeOriginalText"
                              th:text="#{translatePdf.includeOriginal.label}"></label>
                          </div>
                        </div>
                      </div>
                      <div class="mt-3"
                        th:if="${llmConfig == null or llmConfig.allowCustomPrompt}">
                        <label class="form-label"
                          for="customPrompt"
                          th:text="#{translatePdf.customPrompt.label}"></label>
                        <textarea id="customPrompt" name="customPrompt" rows="3" class="form-control"
                        th:placeholder="#{translatePdf.customPrompt.placeholder}"></textarea>
                      </div>
                    </div>
                  </div>

                  <p class="text-muted"
                    th:text="#{translatePdf.helper.instructions}"></p>

                  <button type="submit"
                    class="btn btn-primary"
                    th:text="#{translatePdf.submit}"
                    id="submitBtn"></button>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
      <th:block th:insert="~{fragments/footer.html :: footer}"></th:block>
    </div>
  </body>

</html>